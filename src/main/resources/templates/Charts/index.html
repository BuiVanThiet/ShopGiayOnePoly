<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{Home/home_manege}">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="/css/Chart/chart.css">
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <title>Thống kê</title>
  <style>
    #chart_div {
      width: 100%; /* Đặt chiều rộng là 100% của phần tử chứa */
      height: 600px; /* Đặt chiều cao cho biểu đồ */
    }
  </style>
</head>

<body>

<main class="container">
  <div layout:fragment="content">
    <h2 class="text-center custom-heading">THỐNG KÊ</h2>
    <div class="row">
      <div class="col-md-4">
        <div class="rectangle">
          <h6>Doanh số hôm nay</h6>
          <p class="data-from-be"><span th:text="${billOfTheDay} + ' Đơn hàng /'"></span>
            <span th:text="${totalPriceToday} + 'VND'"></span></p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="rectangle">
          <h6>Doanh số tháng này</h6>
          <p class="data-from-be"><span th:text="${monthlyBill} + ' Đơn hàng /'"></span>
            <span  class="total-amount" th:text="${totalMonthlyBill} +'VND'"></span></p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="rectangle">
          <h6>Hàng bán được tháng này</h6>
          <p class="data-from-be"><span th:text="${totalMonthlyInvoiceProducts} + ' Sản phẩm'"></span></p>
        </div>
      </div>
    </div>
    <div class="row mt-4">
      <div class="col-md-12">
        <div id="chart_div"></div>
        <script>
          google.charts.load('current', {packages: ['corechart', 'bar']});
          google.charts.setOnLoadCallback(drawMultSeries);

          function drawMultSeries() {
            var data = new google.visualization.DataTable();
            data.addColumn('date', 'Ngày'); // Sử dụng kiểu 'date' cho cột thời gian
            data.addColumn('number', 'Sản phẩm');
            data.addColumn('number', 'Hóa đơn');

            // Thêm dữ liệu cho từng tháng của năm 2002
            data.addRows([
              [new Date(2002, 0, 1), 1, 0.25], // Tháng 1
              [new Date(2002, 1, 1), 2, 0.5],  // Tháng 2
              [new Date(2002, 2, 1), 3, 1],    // Tháng 3
              [new Date(2002, 3, 1), 4, 1.5],  // Tháng 4
              [new Date(2002, 4, 1), 5, 2],    // Tháng 5
              [new Date(2002, 5, 1), 6, 2.5],  // Tháng 6
              [new Date(2002, 6, 1), 7, 3],    // Tháng 7
              [new Date(2002, 7, 1), 8, 3.5],  // Tháng 8
              [new Date(2002, 8, 1), 9, 4],    // Tháng 9
              [new Date(2002, 9, 1), 10, 4.5], // Tháng 10
              [new Date(2002, 10, 1), 11, 5],  // Tháng 11
              [new Date(2002, 11, 1), 12, 5.5] // Tháng 12
            ]);

            var options = {
              title: 'Biểu đồ thống kê và sản phẩm',
              titleTextStyle: {
                alignment: 'center' // Căn giữa tiêu đề
              },
              hAxis: {
                title: 'Ngày',
                format: 'dd/MM/yyyy', // Định dạng hiển thị ngày
                viewWindow: {
                  min: new Date(2002, 0, 1), // Ngày bắt đầu
                  max: new Date(2002, 11, 31) // Ngày kết thúc
                }
              },
              vAxis: {
                title: 'Số lượng'
              }
            };

            var chart = new google.visualization.ColumnChart(
                    document.getElementById('chart_div')
            );

            chart.draw(data, options);
          }

        </script>
      </div>
    </div>
    <div class="filter-section">
      <form action="#" method="GET" class="custom-form-inline">
        <!-- Bộ lọc khoảng thời gian -->
        <div class="button-group" role="group" aria-label="Thời gian lọc">
          <button type="button" class="custom-btn" onclick="filterData('today')">Hôm nay</button>
          <button type="button" class="custom-btn" onclick="filterData('last7days')">7 Ngày</button>
          <button type="button" class="custom-btn" onclick="filterData('month')">Tháng</button>
          <button type="button" class="custom-btn" onclick="filterData('year')">Năm</button>
        </div>
      </form>
    </div>
  </div>
</main>

<script th:src="@{/js/chart/chart.js}" type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>